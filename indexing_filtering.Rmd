---
title: "Basic Concepts in R: Indexing & Filtering"
description: |
#   A new article created using the Distill format.
author:
  - name: Tehilla Ostrovsky 
#     url: https://example.com/norajones
#     affiliation: Spacely Sprockets
#     affiliation_url: https://example.com/spacelysprokets
date: "`r Sys.Date()`"
output: distill::distill_article
---



Indexing in R ist ein wichtiges Konzept, das es uns ermöglicht, auf bestimmte Elemente oder Teilmengen von Daten in Vektoren, Matrizen und Datenrahmen zuzugreifen. 

In diesem Blog werden wir die Indexing anhand von Beispielen für jede dieser Datenstrukturen (i.e., Objekte) behandeln.

Um unser Leben zu erleichtern und den Inhalt dieses Blogs verständlicher zu machen, werden wir ein alltägliches Beispiel verwenden. Das Beispiel basiert auf einem Datensatz (keine Sorge, es ist ein erfundener, den ich zum Zwecke dieses Blogs erstellt habe), der eine Liste von Kleidungsstücken enthält. Hier konzentrieren wir uns auf Jeans, die verschiedene Attribute aufweisen, über die wir indexieren können.


In unserem Kleider-Datensatz können wir die "perfekte" Jeans suchen. Dafür wereden wir Indexierungsmethoden in R verwenden, um unsere Suche zu verfeinern und genau das zu finden, ohne jeden Eintrag einzeln durchsehen zu müssen.

Durch die Verwendung von Indexierungsoperationen können wir beispielsweise alle Jeans einer bestimmten Preis herausfiltern. 

Wir könnten auch komplexere Abfragen durchführen, wie das Suchen aller Jeans, die weniger als 50 Euro kosten.

Im Verlauf dieses Blogs werden wir sehen, wie solche Indexierungen in R effizient durchgeführt werden können, sodass Sie die volle Kontrolle über Ihre Daten und deren Abfragen haben. 


## Bonus 

Zusätzlich, als Bonus und um zu veranschaulichen, wie wir vom Filtern und Indexieren zur Visualisierung übergehen, werden wir auch die Funktion hist() verwenden, um eine Histogramm-Grafik zu erstellen. 

Dies wird nicht nur unser Datenverständnis vertiefen, sondern uns auch ermöglichen, unsere Daten zusammenzufassen und visuell darzustellen.

Ein Histogramm ist eine großartige Möglichkeit, die Verteilung der Daten zu zeigen. Beispielsweise könnten wir ein Histogramm der Jeanspreise erstellen, um zu sehen, wie viele Jeans in verschiedene Preiskategorien fallen. 

Dies kann besonders hilfreich sein, **um Muster in unseren Daten schnell zu erkennen**, wie etwa das Vorherrschen bestimmter Preisbereiche oder das Erkennen, ob es Ausreißer gibt.

Indem wir die hist() Funktion auf unseren gefilterten Datensatz anwenden – zum Beispiel, nachdem wir alle Jeans einer bestimmten Marke ausgewählt haben – können wir die Verteilung der Attribute wie Preis oder Größe innerhalb dieser Auswahl betrachten. Dies bietet einen direkten Einblick in die Charakteristiken unserer Daten und unterstützt uns dabei, bessere Entscheidungen und Analysen zu treffen.



## Indexing a Vector:
In R ist ein Vektor ein eindimensionales Array von Datenelementen (e.g., x = 3). Sie können einen Vektor 'indizieren', um auf bestimmte Elemente zuzugreifen, indem Sie eckige Klammern [] verwenden. Die Indexierung von Vektoren beginnt bei 1 (In anderen Programmiersprachen beginnt die 'Indexing' bei 0).

Here's how to index a vector:


```{r}
# Create a vector
my_vector = c(10, 20, 30, 40, 50)

# Access the first element
element_1 = my_vector[1]
print(element_1)  # Output: 10

# Access the third element
element_3 = my_vector[3]
print(element_3)  # Output: 30

```


Du kannst auch vektorisierte Indexing verwenden, um auf mehrere Elemente gleichzeitig zuzugreifen:

```{r}
# Access the first three elements
elements_1_to_3 = my_vector[1:3]
print(elements_1_to_3)  # Output: 10 20 30
```



## Indexing a Matrix:

Eine Matrix ist ein zweidimensionales Array mit Zeilen und Spalten. 

Du kannst Elemente einer Matrix 'indizieren', indem du die eckige Klammern mit Zeilen- und Spaltenindizes verwendest, die durch ein Komma getrennt sind.


<img src="img/Gif_indexing.gif"></img>

So indizierst du eine Matrix:

```{r}
# Create a matrix
my_matrix = matrix(1:9, nrow = 3, ncol = 3)

# Access the element in the second row and third column
element_2_3 = my_matrix[2, 3]
print(element_2_3)  # Output: 6
```


So 'indizierst' du eine Matrix:

```{r}
# Access the second row
row_2 = my_matrix[2, ]
print(row_2)  # Output: 4 5 6

# Access the first column
col_1 = my_matrix[, 1]
print(col_1)  # Output: 1 2 3

```



## Indexing a DataFrame:
Ein Data Frame ist eine zweidimensionale Datenstruktur in R, ähnlich wie eine Tabelle in einer Datenbank oder ein Excel Spreadsheet.  

Du kannst ein Data Frame mit eckigen Klammern 'indizieren' und dabei die Zeilen- und Spaltennamen oder -indizes angeben.

So wird ein Data Frame 'indiziert':

```{r}
# Create a data frame
my_dataframe = data.frame(
  ItemType = rep(c("jeans"), 100),
  Price = round(rnorm(100, 60, 20), digits = 0),
  Cut = rep(c("boot", "7/8", "skinny", "wide leg", "boyfriend"), 120)
)

# get a glimpse of the data
head(my_dataframe)

# Access the second row
row_2 = my_dataframe[2, ]
print(row_2)


# Access the entire first column
col_2 = my_dataframe[ ,2]
col_2[1:50]


# Access the 'Age' column using column name
allCuts = my_dataframe$Cut
allCuts[1:20]  # Output: 25 30 22

# get the type of the Item Type 
typeof(allCuts)

# get the categories within Item Type
levels(allCuts) # returns NUll....why?

# turn the variable into factor 
my_dataframe$Cut = factor(my_dataframe$Cut)


# get the categories within Item Type
levels(my_dataframe$Cut)
```



# Indexing by condition
Angenommen, du hast einen Data Frame namens 'my_dataframe' wie folgt:

```{r}
condition_boot = my_dataframe$Cut == "boot"

my_dataframe_boot = my_dataframe[condition_boot,]

#get a glimpse of the new dataframe using the head(). Use the ? mark to learn about the function head (or any other function)
head(my_dataframe_boot, n = 20) # n stands for the number of top observations you wish to see out of the dataframe 


# bonus...lets see the distribution of the prices of boot cuts 
hist(my_dataframe[condition_boot, 2],
      col = "lightblue", border = "#227FCE",
     main = paste("Histogram of Boot-Cut Jeans"),
     xlab = "prices of wide-leg jeans")
```

### and a bonus filtering task

```{r}
# bonus...lets see the distribution of the prices of wide leg cuts looks similar....
condition_wide = my_dataframe$Cut == "wide leg"

hist(my_dataframe[condition_wide, 2],
     col = "lightblue", border = "black",
     main = paste("Histogram of Wide-leg Jeans"),
     xlab = "prices of wide-leg jeans"
     )
```

## yet another way to index/filter 

Stellen wir uns vor, wir haben einen Datenrahmen namens "clothing", der eine Liste verschiedener Kleidungsstücke, deren Farben und Preise enthält. Wir wollen Zeilen für alle Jeans extrahieren, die blau sind (oder die mehr als 35 EUR kosten). Hier ist ein Beispiel, wie du den Datenrahmen einrichten und die Operation durchführen könntest:

Auch in diesem Beispiel: Wir können auch mehrerer Bedingungen kombinieren mithilfe von logischen Operatoren wie & (UND) und | (ODER). Zum Beispiel, wenn du Zeilen filtern möchtest, in denen 'price' größer als 59 und ein "wide leg" cut ist:

```{r}
# condition that will select both wide cuts and those that cost more than 59Euro
condition_wide_39 = my_dataframe$Cut == "wide leg" & my_dataframe$Price > 39
print(condition_wide_39)

data_wide_39 = my_dataframe[condition_wide_39,]

hist(data_wide_39[,2],
     col = "lightblue", border = "#227FCE",
     main = paste("Histogram of > 39Euros & Wide-leg Cut"),
     xlab = "prices of 'wide-leg & price > 39' jeans"
     )

```


---


## Important to know: 

### In R, the '$' sign is used to access a specific column (variable) within a data frame or list. It allows you to extract or work with a single column of data from a larger data structure, such as a data frame, without having to reference the entire data frame each time.

**Task 1: Access a Specific Element in a Matrix**

<div style = "border: 1px solid;margin: auto;width: 90%;padding: 10px;text-align:left;background:#DBF9FC;font-family: curier;font-size:15px">

1. Create a 3x3 numeric matrix named my_matrix with values (1 to 9).

2. Use indexing to access and display the element in the second row and third column.

3. Print the value of the accessed element.

</div>

```{r, echo=FALSE, results='hide'}
# Create a 3x3 matrix
my_matrix = matrix(1:9, nrow = 3, ncol = 3)

# Access the element in the second row and third column
element = my_matrix[2, 3]
print(element)

```

**Task 2: Extract an Entire Row from a Matrix**

<div style = "border: 1px solid;margin: auto;width: 90%;padding: 10px;text-align:left;background:#DBF9FC;font-family: curier;font-size:15px">

1. Extend the 3x3 matrix from the previous task to include additional rows.

2. Use indexing to extract and display the entire second row of the matrix.

3. Print the extracted row to verify its contents.

</div>


```{r, echo=FALSE, results='hide'}
# Extend the 3x3 matrix
my_matrix = matrix(1:12, nrow = 4, ncol = 3)

# Extract the entire second row
second_row = my_matrix[2, ]
print(second_row)

```

**Task 3: Extract a Column from a Matrix**

<div style = "border: 1px solid;margin: auto;width: 90%;padding: 10px;text-align:left;background:#DBF9FC;font-family: curier;font-size:15px">


1. Extend the 4x3 matrix from the previous task to include more columns.

2. Use indexing to extract and display the entire third column of the matrix.

3. Print the extracted column to ensure it contains the correct values.
</div>


```{r, echo=FALSE, results='hide'}
# Extend the 4x3 matrix
my_matrix = matrix(1:16, nrow = 4, ncol = 4)

# Extract the third column
third_column = my_matrix[, 3]
print(third_column)
```

**Task 4: Access a Single Column in a Data Frame**

<div style = "border: 1px solid;margin: auto;width: 90%;padding: 10px;text-align:left;background:#DBF9FC;font-family: curier;font-size:15px">


1. Create a data frame named my_dataframe with two columns: 'Name' and 'Age'. For example:

my_dataframe = data.frame(
  Name = c("Alice", "Bob", "Charlie"),
  Age = c(25, 30, 22)
)

2. Use the $ sign to access and print the 'Age' column.
</div>

```{r, echo=FALSE, results='hide'}
# Access the 'Item Type' column
itemType = my_dataframe$ItemType
print(itemType)
```


**Task 5: Filter Rows Based on a Condition in a Data Frame**

<div style = "border: 1px solid;margin: auto;width: 90%;padding: 10px;text-align:left;background:#DBF9FC;font-family: curier;font-size:15px">


1. Add a new column named 'Salary' to the my_dataframe data frame with these salary values: 35000, 40000, 28000, 45000.

2. Write code to filter and display only the rows where the 'Salary' is greater than 30000.

3. Confirm that the filtering produces the expected result.

</div>

```{r, echo=FALSE, results='hide'}
# Add 'Salary' column
my_dataframe$sale = rep(c(TRUE, FALSE), length(my_dataframe$ItemType)/2)

# Filter rows where 'Salary' > 30000
filtered_dataframe = my_dataframe[my_dataframe$sale == TRUE, ]
print(filtered_dataframe)

hist(filtered_dataframe$Price,
     col = "#FAC0CF", border = "#CE224E",
     main = "Distribution of Prices of Jeans on Sale", xlab = "prices of jeans on sale")

```

**Task 6: Access Multiple Columns in a Data Frame**

<div style = "border: 1px solid;margin: auto;width: 90%;padding: 10px;text-align:left;background:#DBF9FC;font-family: curier;font-size:15px">

1. Extend the my_dataframe data frame with a new column named 'Department.'. Use the '$' sign or cbind() to do so. 

2. Use indexing to access and display both the 'Name' and 'Department' columns simultaneously.

3. Print the selected columns to ensure you can access and view them.
</div>


```{r, echo=FALSE, results='hide'}
# Extend the data frame with 'item ID' column
my_dataframe$ID <- c(1:600)

# take a plimse of the data with the head() function

head(my_dataframe)

# Select only the ID 1-100
id_1_100 <- my_dataframe[1:100, ]
id_1_100 <- my_dataframe[1:100, ]

print(id_1_100)
```

